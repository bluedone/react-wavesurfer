!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o(require("react"),require("wavesurfer.js")):"function"==typeof define&&define.amd?define(["react","wavesurfer"],o):"object"==typeof exports?exports.Wavesurfer=o(require("react"),require("wavesurfer.js")):e.Wavesurfer=o(e.React,e.WaveSurfer)}(this,function(e,o){return function(e){function o(t){if(r[t])return r[t].exports;var n=r[t]={exports:{},id:t,loaded:!1};return e[t].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}var r={};return o.m=e,o.c=r,o.p="",o(0)}([function(e,o,r){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function n(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function s(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}function i(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}function u(e){return e.split("-").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join("")}function p(e,o,r){var t=e[o];return void 0!==t&&("number"!=typeof t||t!==parseInt(t,10)||0>t)?new Error("Invalid `"+o+"` supplied to `"+r+"`, expected a positive integer"):void 0}Object.defineProperty(o,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},l=function(){function e(e,o){for(var r=0;r<o.length;r++){var t=o[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(o,r,t){return r&&e(o.prototype,r),t&&e(o,t),o}}(),f=r(2),c=t(f),d=r(1),y=t(d),v=r(3),h=["audioprocess","error","finish","loading","mouseup","pause","play","ready","scroll","seek","zoom"],b=function(e){function o(e){n(this,o);var r=s(this,Object.getPrototypeOf(o).call(this,e));if(r.state={pos:0},void 0===("undefined"==typeof v?"undefined":a(v)))throw new Error("WaveSurfer is undefined!");return r._wavesurfer=Object.create(v),r._isReady=!1,r._playing=!1,r._loadAudio=r._loadAudio.bind(r),r._seekTo=r._seekTo.bind(r),r}return i(o,e),l(o,[{key:"componentDidMount",value:function(){var e=this,o=(0,y["default"])({},this.props.options,{container:this.refs.wavesurfer});this._wavesurfer.init(o),this._wavesurfer.on("ready",function(){e._isReady=!0,e.props.pos&&e._seekTo(e.props.pos),e.props.volume&&e._wavesurfer.setVolume(e.props.volume),e.props.zoom&&e._wavesurfer.zoom(e.props.zoom)}),this._wavesurfer.on("audioprocess",function(o){e.setState({pos:o}),e.props.onPosChange({wavesurfer:e._wavesurfer,originalArgs:[o]})}),this._wavesurfer.on("seek",function(o){o=e._posToSec(o),e.setState({pos:o}),e.props.onPosChange({wavesurfer:e._wavesurfer,originalArgs:[o]})}),h.forEach(function(o){var r=e.props["on"+u(o)],t=e._wavesurfer;r&&e._wavesurfer.on(o,function(){r({wavesurfer:t,originalArgs:[].concat(Array.prototype.slice.call(arguments))})})}),this.props.audioFile&&this._loadAudio(this.props.audioFile)}},{key:"componentWillUnmount",value:function(){var e=this;h.forEach(function(o){e._wavesurfer.un(o)}),this._wavesurfer.destroy()}},{key:"componentWillReceiveProps",value:function(e){this.props.audioFile!==e.audioFile&&this._loadAudio(e.audioFile),e.pos&&this._isReady&&e.pos!==this.props.pos&&e.pos!==this.state.pos&&this._seekTo(e.pos),this.props.playing===e.playing&&this._wavesurfer.isPlaying()===e.playing||(e.playing?(this._wavesurfer.play(),this._playing=!0):(this._wavesurfer.pause(),this._playing=!1)),this.props.volume!==e.volume&&this._wavesurfer.setVolume(e.volume),this.props.zoom!==e.zoom&&this._wavesurfer.zoom(e.zoom)}},{key:"shouldComponentUpdate",value:function(e,o){return!1}},{key:"_secToPos",value:function(e){return 1/this._wavesurfer.getDuration()*e}},{key:"_posToSec",value:function(e){return e*this._wavesurfer.getDuration()}},{key:"_seekTo",value:function(e){var o=this._secToPos(e);this.props.autoCenter?this._wavesurfer.seekAndCenter(o):this._wavesurfer.seekTo(o)}},{key:"_loadAudio",value:function(e){if("string"==typeof e)this._wavesurfer.load(e);else{if(!(e instanceof Blob||e instanceof File))throw new Error("Wavesurfer._loadAudio expexts prop audioFile to be either string or file/blob");this._wavesurfer.loadBlob(e)}}},{key:"render",value:function(){var e=this,o=this.props.children?c["default"].Children.map(this.props.children,function(o){return c["default"].cloneElement(o,(0,y["default"])({},{wavesurfer:e._wavesurfer,isReady:e._isReady},e.props))}):!1;return c["default"].createElement("div",null,c["default"].createElement("div",{ref:"wavesurfer"}),o)}}]),o}(f.Component);b.propTypes={playing:f.PropTypes.bool,pos:f.PropTypes.number,audioFile:function(e,o,r){var t=e[o];return t&&"string"!=typeof t&&!t instanceof Blob&&!t instanceof File?new Error("Invalid `"+o+"` supplied to `"+r+"` expected either string or file/blob"):void 0},regions:f.PropTypes.array,volume:f.PropTypes.number,zoom:f.PropTypes.number,options:f.PropTypes.shape({audioRate:f.PropTypes.number,backend:f.PropTypes.oneOf(["WebAudio","MediaElement"]),barWidth:function(e,o,r){var t=e[o];return void 0!==t&&"number"!=typeof t?new Error("Invalid `"+o+"` supplied to `"+r+"` expected either undefined or number"):void 0},cursorColor:f.PropTypes.string,cursorWidth:p,dragSelection:f.PropTypes.bool,fillParent:f.PropTypes.bool,height:p,hideScrollbar:f.PropTypes.bool,interact:f.PropTypes.bool,loopSelection:f.PropTypes.bool,mediaControls:f.PropTypes.bool,minPxPerSec:p,normalize:f.PropTypes.bool,pixelRatio:f.PropTypes.number,progressColor:f.PropTypes.string,scrollParent:f.PropTypes.bool,skipLength:f.PropTypes.number,waveColor:f.PropTypes.string,autoCenter:f.PropTypes.bool})},b.defaultProps={playing:!1,pos:0,audioFile:void 0,options:v.defaultParams,onPosChange:function(){}},o["default"]=b},function(e,o){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;e.exports=Object.assign||function(e,o){for(var s,i,u=r(e),p=1;p<arguments.length;p++){s=Object(arguments[p]);for(var a in s)t.call(s,a)&&(u[a]=s[a]);if(Object.getOwnPropertySymbols){i=Object.getOwnPropertySymbols(s);for(var l=0;l<i.length;l++)n.call(s,i[l])&&(u[i[l]]=s[i[l]])}}return u}},function(o,r){o.exports=e},function(e,r){e.exports=o}])});