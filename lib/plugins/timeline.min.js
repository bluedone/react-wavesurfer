!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("wavesurfer.js"),require("react")):"function"==typeof define&&define.amd?define(["wavesurfer","react"],t):"object"==typeof exports?exports["plugins/timeline"]=t(require("wavesurfer.js"),require("react")):(e.Wavesurfer=e.Wavesurfer||{},e.Wavesurfer["plugins/timeline"]=t(e.WaveSurfer,e.React))}(this,function(e,t){return function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=r(2),c=i(l),f=r(3),p=i(f),h=r(1);r(6);var u=function(e){function t(e){n(this,t);var r=o(this,Object.getPrototypeOf(t).call(this,e));return r.timeline=null,r}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this.props.isReady&&this.init(),this.props.wavesurfer.on("ready",this._init.bind(this))}},{key:"_init",value:function(){this.timeline=Object.create(h.Timeline),this.timeline.init((0,p["default"])({},this.props.options,{container:this.refs.timeline,wavesurfer:this.props.wavesurfer}))}},{key:"render",value:function(){return c["default"].createElement("div",null,c["default"].createElement("div",{ref:"timeline"}))}}]),t}(l.Component);u.propTypes={isReady:l.PropTypes.bool.isRequired,options:l.PropTypes.object.isRequired,wavesurfer:l.PropTypes.object},u.defaultProps={isReady:!1,options:{}},t["default"]=u},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){"use strict";function i(e){if(null===e||void 0===e)throw new TypeError("Sources cannot be null or undefined");return Object(e)}function n(e,t,r){var i=t[r];if(void 0!==i&&null!==i){if(s.call(e,r)&&(void 0===e[r]||null===e[r]))throw new TypeError("Cannot convert undefined or null to object ("+r+")");s.call(e,r)&&a(i)?e[r]=o(Object(e[r]),t[r]):e[r]=i}}function o(e,t){if(e===t)return e;t=Object(t);for(var r in t)s.call(t,r)&&n(e,t,r);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(t),o=0;o<i.length;o++)l.call(t,i[o])&&n(e,t,i[o]);return e}var a=r(4),s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;e.exports=function(e){e=i(e);for(var t=1;t<arguments.length;t++)o(e,arguments[t]);return e}},function(e,t){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};e.exports=function(e){var t="undefined"==typeof e?"undefined":r(e);return null!==e&&("object"===t||"function"===t)}},,function(e,t,r){var i,n;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(o,a){i=[r(1)],n=function(e){return a(e)}.apply(t,i),!(void 0!==n&&(e.exports=n))}(void 0,function(e){"use strict";e.Timeline={init:function(e){this.params=e;var t=this.wavesurfer=e.wavesurfer;if(!this.wavesurfer)throw Error("No WaveSurfer intance provided");var r=this.drawer=this.wavesurfer.drawer;if(this.container="string"==typeof e.container?document.querySelector(e.container):e.container,!this.container)throw Error("No container for WaveSurfer timeline");this.width=r.width,this.height=this.params.height||20,this.notchPercentHeight=this.params.notchPercentHeight||90,this.primaryColor=this.params.primaryColor||"#000",this.secondaryColor=this.params.secondaryColor||"#c0c0c0",this.primaryFontColor=this.params.primaryFontColor||"#000",this.secondaryFontColor=this.params.secondaryFontColor||"#000",this.fontFamily=this.params.fontFamily||"Arial",this.fontSize=this.params.fontSize||10,this.timeInterval=this.params.timeInterval,this.primaryLabelInterval=this.params.primaryLabelInterval,this.secondaryLabelInterval=this.params.secondaryLabelInterval,this.formatTimeCallback=this.params.formatTimeCallback,this.createWrapper(),this.createCanvas(),this.render(),t.drawer.wrapper.onscroll=this.updateScroll.bind(this),t.on("redraw",this.render.bind(this)),t.on("destroy",this.destroy.bind(this))},destroy:function(){this.unAll(),this.wrapper&&this.wrapper.parentNode&&(this.wrapper.parentNode.removeChild(this.wrapper),this.wrapper=null)},createWrapper:function(){var e=this.container.querySelector("timeline");e&&this.container.removeChild(e);var t=this.wavesurfer.params;this.wrapper=this.container.appendChild(document.createElement("timeline")),this.drawer.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.height+"px"}),(t.fillParent||t.scrollParent)&&this.drawer.style(this.wrapper,{width:"100%",overflowX:"hidden",overflowY:"hidden"});var r=this;this.wrapper.addEventListener("click",function(e){e.preventDefault();var t="offsetX"in e?e.offsetX:e.layerX;r.fireEvent("click",t/r.wrapper.scrollWidth||0)})},createCanvas:function(){var e=this.canvas=this.wrapper.appendChild(document.createElement("canvas"));this.timeCc=e.getContext("2d"),this.wavesurfer.drawer.style(e,{position:"absolute",zIndex:4})},render:function(){this.updateCanvasStyle(),this.drawTimeCanvas()},updateCanvasStyle:function(){var e=this.drawer.wrapper.scrollWidth;this.canvas.width=e*this.wavesurfer.params.pixelRatio,this.canvas.height=this.height*this.wavesurfer.params.pixelRatio,this.canvas.style.width=e+"px",this.canvas.style.height=this.height+"px"},drawTimeCanvas:function(){var e=this.wavesurfer.backend,t=this.wavesurfer.params,r=e.getDuration(),i=this;if(t.fillParent&&!t.scrollParent)var n=this.drawer.getWidth();else n=this.drawer.wrapper.scrollWidth*t.pixelRatio;var o=n/r;if(!(0>=r)){var a=0,s=0,l=parseInt(r,10)+1,c=function(e){if("function"==typeof i.formatTimeCallback)return i.formatTimeCallback(e);if(e/60>1){var t=parseInt(e/60),e=parseInt(e%60);return e=10>e?"0"+e:e,""+t+":"+e}return e};if(1*o>=25)var f=1,p=10,h=5;else if(5*o>=25)var f=5,p=6,h=2;else if(15*o>=25)var f=15,p=4,h=2;else var f=60,p=4,h=2;f=this.timeInterval||f,p=this.primaryLabelInterval||p,h=this.secondaryLabelInterval||h;for(var u=this.height-4,d=this.height*(this.notchPercentHeight/100)-4,y=this.fontSize*t.pixelRatio,m=0;l/f>m;m++)m%p==0?(this.timeCc.fillStyle=this.primaryColor,this.timeCc.fillRect(a,0,1,u),this.timeCc.font=y+"px "+this.fontFamily,this.timeCc.fillStyle=this.primaryFontColor,this.timeCc.fillText(c(s),a+5,u)):m%h==0?(this.timeCc.fillStyle=this.secondaryColor,this.timeCc.fillRect(a,0,1,u),this.timeCc.font=y+"px "+this.fontFamily,this.timeCc.fillStyle=this.secondaryFontColor,this.timeCc.fillText(c(s),a+5,u)):(this.timeCc.fillStyle=this.secondaryColor,this.timeCc.fillRect(a,0,1,d)),s+=f,a+=o*f}},updateScroll:function(){this.wrapper.scrollLeft=this.drawer.wrapper.scrollLeft}},e.util.extend(e.Timeline,e.Observer)})}])});